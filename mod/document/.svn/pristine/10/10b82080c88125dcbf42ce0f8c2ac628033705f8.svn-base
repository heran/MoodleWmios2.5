<?php
// This file is part of Moodle - http://moodle.org/
//
// Moodle is free software: you can redistribute it and/or modify
// it under the terms of the GNU General Public License as published by
// the Free Software Foundation, either version 3 of the License, or
// (at your option) any later version.
//
// Moodle is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
// GNU General Public License for more details.
//
// You should have received a copy of the GNU General Public License
// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.




defined('MOODLE_INTERNAL') || die();

class mod_document_renderer extends plugin_renderer_base {
    /**
    * smarty class
    *
    * @var Smarty
    */
    protected $_smarty = null;

    /**
    * @return Smarty
    *
    */
    public function get_smarty() {
        if($this->_smarty === null){
            $this->_smarty = get_smarty('mod_document',null,$this->page);
        }
        return $this->_smarty;
    }

    public function render_field_dict_list(document_field_tree $field_dict_root, document_field_type $field_type)
    {

        $url_base = new moodle_url('/mod/document/field_manage.php',array(
            'course_id'=>$field_type->course_id,
            'type_id'=>$field_type->id,
            'action'=>'field_dict'
            ));
        $url_type = new moodle_url('/mod/document/field_manage.php',array('action'=>'field_type','subaction'=>'list','course_id'=>$field_type->course_id));

        $smarty = $this->get_smarty();
        $smarty->assign('field_dict_root' ,$field_dict_root);
        $smarty->assign('field_type' ,$field_type);
        $smarty->assign('url_base',$url_base->out(false));
        $smarty->assign('url_type',$url_type->out(false));
        return $smarty->fetch('field_dict_list.tpl');
    }

    /**
    * put your comment there...
    *
    * @param document_field_type[] $field_types
    * @param mixed $COURSE
    */
    public function render_field_type_list(array $field_types,$COURSE)
    {
        $url_base = new moodle_url('/mod/document/field_manage.php',array(
            'course_id'=>$COURSE->id
        ));

        $smarty = $this->get_smarty();
        $smarty->assign('field_types' ,$field_types);
        $smarty->assign('course' ,$COURSE);
        $smarty->assign('url_base',$url_base->out(false));
        $smarty->assign('permission_str',document_field_type::permission_option_array());
        return $smarty->fetch('field_type_list.tpl');
    }
}
