//

var M = M || {};
M.W = M.W || {};
M.W.modview = M.W.modview || {};
M.W.modview.modhandler = M.W.modview.modhandler || {};

M.W.modview.modhandler.choice =choice_mod_view = {
    support:{goto_and_play:false,get_now_position:false,resume_mod:false},
    load_modview:function(cmid,content_box,intro_box,callback){

        $.get(M.cfg.wwwroot+'/mod/choice/view.php',{id:cmid},function(data){

            data = $(data);

            var cintro=$(data).find('div[role=main]>#intro');
            //投票描述
            var intro = $(data).find('div[role=main]>#intro>div').html();
            //表单
            var forms = $(data).find('div[role=main]>form').html();

            var tables = $(data).find('div[role=main] table').html();

            var response = $(data).find('div[role=main]>.responseheader');



            var html =
            '<div class="mod-choice-content">';

            if(cintro.length>0){
                html += '<div class=intros>'+intro+'</div>';
            }

            html += '<div class=forms><form method="POST" action="http://u25.wmios.com/mod/choice/view.php">'+forms+'</form></div>';

            if(response.length>0){
                
                html += '<div class="response">'+response.html()+'</div>';            
                html +='<div class="tables"><table cellpadding="5" cellspacing="0">'+tables+'</table></div>';
            }

            html += '</div>';

            $(content_box).html(html);

            //提交后
            $('form').submit(function(){

               
                return false;
            });



            if(typeof callback != 'undefined'){
                callback(cmid);
            }
        });
       
    }



}
